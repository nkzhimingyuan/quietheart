

一、ipv6地址格式(表示)
==========================
1.构成
IPv6地址 = 网络前缀 + 接口标识
网络前缀：相当于v4地址中的网络ID
接口标识：相当于v4地址中的主机ID
接口标识的生成可以是：由IEEE EUI－64规范自动生成，设备随机生成，手工配置。


2.表示
IPV6地址采用冒号分十六进制格式，即总长度128位，分8组，每组16比特，用4个16进制数表示（大小写不敏感），各组之间用"："隔开，每组中最前面的0可以省略，但每组必须得有一个数。

基本格式
FEDC:BA98:7654:3210:FEDC:BA98:7654:3210 
1080:0:0:0:8:800:200C:417A 

简化格式
在IPV6地址段中有时会出现连续的几组0，这时这些0可以用"::"代替，但一个地址中只能出现一次"::"，如下： 
1080:0:0:0:8:800:200C:417A =1080::8:800:200C:417A 
FF01:0:0:0:0:0:0:101=FF01::101 
0:0:0:0:0:0:0:1=::1 
0:0:0:AB98:123C:0:0:0=::AB98:123C:0:0:0或0:0:0:AB98:123C::。不能写成::BA98:7654::，这种写法用了多次冒号置换原则。

混合格式
某些情况下，IPV4地址需要包含在IPV6地址中，这时，最后两组用现在习惯使用的IPV4的十进制表示方法，前六组表示方法同上。如下：
0:0:0:0:0:0:61.1.133.1 或::61.1.133.1 

另外，可以用“IPv6地址/前缀长度”来表示地址前缀。这个表示方法类似于CIDR中IPv4的地址前缀表示法。这里IPv6地址是上述任一种表示法所表示的IPv6地址，前缀长度是一个十进制值，指定该地址中最左边的用于组成前缀的位数。为了说明地址前缀表示法，现举一个例，假如一个IP地址它的地址前缀为16位，IP地址为“1080::8:810:213C:123A”，则用地址前缀法表示就为：1080::8:810:213C:123A/32。

二、ipv6地址分类
==========================
    IPv6地址分为单播地址、任播地址、组播地址。和IPv4相比，取消了广播地址类型，以更丰富的组播地址代替，同时增加了任播地址类型。
    在IPv6中，任何全“0”和全“1”的字段都是合法值，除非特殊地排除在外的。特别是前缀可以包含“0”值字段或以“0”为终结。一个单接口可以指定任何类型的多个IPv6地址（单播、任意播、组播）或范围。

1.unicast 单播（单点传送）地址
    所有非组播（格式前缀不是11111111）的，都是单播地址。发往单播地址的包被送给该地址标识的接口。对于有多个接口的节点，它的任何一个单播地址都可以用作该节点的标识符。IPv6单播地址是用连续的位掩码聚集的地址，类似于CIDR的IPv4地址。
    除保留的和未指定的IP外，IPv6中的单播地址还包括:
（1）NSAP地址：0000 001前缀。
（2）IPX分级地址：0000 010前缀。
（3）可聚集全球单播地址：001前缀，相当于ipv4公网地址。
（4）链路本地地址：格式前缀为1111 1110 10，设备自动生成，适用本地网络(不会被IPv6路由器转发),如没有路由器时主机间的通信。
站点本地地址:格式前缀为1111 1110 11，类似ipv4的私网地址。
（5）单播地址中还有下列几种特殊地址，以0000 0000为前缀：
a.不确定地址
单播地址0:0:0:0:0:0:0:0称为不确定地址。它不能分配给任何节点。它的一个应用示例是初始化主机时，在主机未取得自己的地址以前，可在它发送的任何IPv6包的源地址字段放上不确定地址。不确定地址不能在IPv6包中用作目的地址，也不能用在IPv6路由头中；
b.回环地址
单播地址0:0:0:0:0:0:0:1称为回环地址。节点用它来向自身发送IPv6包。它不能分配给任何物理接口。
c.嵌入IPV4地址的IPV6地址
::a.b.c.d,最前96比特为0，后面是ipv4地址，用于一种隧道技术（此技术已逐渐被淘汰）。
::FFFF:a.b.c.d,最前80比特为全0，中间16比特为全1，最后32比特为IPv4地址。这种地址用来把只支持IPv4的节点用IPv6地址表示。在支持双栈的IPv6节点上，IPv6应用发送目的报文是这种地址时，实际上发出的报文为IPv4报文（目的地址是“IPv4映射的IPv6地址”中的IPv4地址）。
    除组播地址（前缀1111 1111）外，格式前缀从001到111的地址的接口标识符都必须为64比特的EUI-64格式。EUI-64格式的地址其实就是将16位的1111111111111110(0xFFFE)插入到48位MAC地址的公司ID（前24位）和扩展ID（后24位）之间。


2.anycast 任播（任意点传送）地址
    一组接口（一般属于不同节点）的地址，实际属于单播地址。发往任意播地址的包只会发给该组地址接口中的一个（路由协议度量距离最近的）。IPv6任意播地址存在下列限制：
a.不能用作源地址，而只能作为目的地址；
b.不能指定给IPv6主机，只能指定给IPv6路由器；
c.从单播地址的地址空间分配，其子网前缀固定，余下位全为0。它是经过预定义的子网-路由器泛播地址，语义上无法和单播地址区分。
子网路由器器任播地址中子网前缀域用来标识特定链路。发送到子网路由器任播地址的报文会被送到子网中的一个路由器。所有路由器都必须支持子网任播地址。


3.multicast 组播（多点传送）地址
    一组接口（一般属于不同节点）的地址，前缀为11111111。发往多播地址的包被送给属于该地址的所有接口。地址构成：前缀（11111111）+标志域（Flags，4位）+范围域（Scope，4位)+组ID字段（112位）。
（1）Flags字段
高3位为0保留，最后1位为1表示IANA永久分配的组播，为0表示临时的组播地址。

（2）Scope字段
确定组播范围（预定义的组播组），除未指定的外，其取值含义如下：
0 保留
1 节点本地范围
2 链路本地范围
5 站点本地范围
8 机构本地范围
E 全球
F 保留

（3）组ID字段
标识Scope给定范围内的组播组，根据Flags可能是临时的也可能是永久的。永久分配的组ID独立于范围域，临时组ID仅与某个特定范围域相关。 

目前的永久分配的“熟知”组播组除保留的外，如下：
所有节点的地址:
FF01:0:0:0:0:0:0:1 （节点本地）
FF02:0:0:0:0:0:0:1 （链路本地）

所有路由器地址:
FF01:0:0:0:0:0:0:2 （节点本地）
FF02:0:0:0:0:0:0:2 （链路本地）
FF05:0:0:0:0:0:0:2 （站点本地）

被请求节点的地址:
FF02:0:0:0:0:1:FFXX:XXXX
这里，被请求节点的地址由被请求节点的单播或任播地址形成：取被请求节点单播或任播地址的低24比特，在前面增加前缀FF02:0:0:0:0:1:FF00::/104构成。例如，和IPv6地址4037::01:800:200E:8C6C 对应的被请求节点组播地址是FF02::1:FF0E:8C6C。被请求节点多播地址：FF02::1:FF00:0000/104, 用于NDP（即邻居发现协议）。


三、主机和路由器的ipv6地址
==========================
主机需要识别如下地址
1． 每一个接口的本链路地址
2． 所有分配的单播地址
3． 环回地址
4． 所有节点多播地址
5． 与每个单播和任播地址对应的被请求节点多播地址
6． 该节点所属的任何其他组的多播地址

除上述地址外，路由器还需要识别如下地址：
1． 每个路由器接口的子网任播地址
2． 其他的所有配置的任播地址
3． 所有路由器多播地址

后面将介绍如何配置ipv6地址。


四、ipv6地址配置原理简介
==========================
主机和路由器的ipv6地址
主机需要识别如下地址（哪些可选？哪些必选？）
（1）每一个接口的本链路地址（必选，不经过路由器即可和同链路网络通信，一般用于邻居发现，及无状态自动配置IP地址，路由器通告发送等场合）
（2）所有分配的单播地址（可选，与其它主机互相访问）
（3）环回地址（必选，发送只能发给自己的环回数据包）
（4）所有节点多播地址（必选，保证节点能收到其它节点发送的邻居公告或路由公告表明是否地址冲突等）
（5）与每个单播和任播地址对应的被请求节点多播地址(必选，邻居发现以及地址唯一性检测时的多播包(RS)地址)
（6）该节点所属的任何其他组的多播地址（）

除上述地址外，路由器还需要识别如下地址：
（1）每个路由器接口的子网任播地址
（2）其他的所有配置的任播地址
（3）所有路由器多播地址

一个接口可以有多个IPV6地址。多个地址分配给同一接口，使得在更换地址的过渡时期,节点能使新地址和正在淡出的旧地址（子网前缀）可以同时工作。
ipv6地址配置有手动配置和自动配置两种方式。

1.手动配置
    手工配置主机IP地址是一件非常繁琐的事情，尤其当主机IP地址需要经常改动的时候，管理分配给主机的静态IP地址是一项艰难的任务。一般用于服务器和重要的网络设备。Linux下可使用"ifconfig"、"route"或"ip"等命令对其进行配置，后面会专门讲述如何手动配置ipv6的地址。

2.自动配置
    IPv6协议支持地址自动配置，这是一种即插即用的机制，在没有任何人工干预的情况下，IPv6网络接口可以获得链路局部地址、站点局部地址和全局地址等，并且可以防止地址重复。IPv6支持“无状态地址自动配置”和“有状态地址自动配置”两种方式。无状态自动配置一般默认支持，后面会讲述如何使用dhcp v6对IP v6地址进行有状态自动配置。

（1）无状态自动配置：
　　无状态地址自动配置在具有组播能力的接口被启用时（例如刚启动系统）开始进行，此时需要配置地址的网络接口先使用邻居发现机制获得一个链路本地地址。网络接口得到这个链路本地地址之后，再发送路由器请求（RS），接受路由器响应的路由器通告以获得地址网络前缀，网络前缀结合接口标识得到一个全局单播地址。如果没有路由器，主机可以只生成链路本地地址。链路本地地址只能用于和同一链路上的节点进行通信。
具体过程如下:
    假设路由器r1，待配置的主机host1。r1已经在与host1互联的接口上配置好了一个可聚集全球单播地址。
    a.host1为自己创建链路本地地址（该操作不要求链路上有路由器，通过本地链路前缀 FE80::0 和接口标识符组合而成）。
    b.host1检验地址在链路上是否唯一，是则使用本地链路地址并且继续，否则需要人工干预（该操作不要求链路上有路由器）。
    获取到链路本地地址之后，host1就具备了在 IP 层上与邻居节点通信的能力。接下来要讲的自动配置步骤只适用于主机不适合路由器。
    下一个阶段，如果链路上有路由器，host1则根据路由器通告信息确定是应通过无状态机制，还是有状态机制实现自动配置；如果无路由器，则进行有状态自动配置。
    对无状态自动配置，继续如下过程：
    d.host1通过r1的路由器通告（RA）发现这条链路上的网络前缀（prefix）。
    e.host1生成一个接口ID（interface id），并添加在prefix的后面。
    f.host1通过重复地址检测机制（DAD）判断地址是否唯一，如果唯一则使用此地址，否则需要手动干预。
    为加速自动配置过程,主机一边产生本地链路地址(并验证它的唯一性),一边等待路由通告。地址冲突检测可通过配置接口来激活或省略。

    IPV6无状态地址配置协议是广泛采用的地址配置方式，配置该协议的主机只需相邻路由开启路由公告功能。由于有了无状态自动配置机制，一个企业更换sp的时候就不需要手动在每台pc上更换地址，而只需将路由器每个接口的prefix改掉。由于无状态地址配置中，路由器不保存ipv6主机的具体地址信息，所以可管理性差，而且也不能获取DNS服务器的地址和域名等信息，同时，对ISP服务商来说也没有指明给路由器分配的IP前缀的规范，只能手动为路由器和交换机配置ipv6地址。我们可以通过结合DHCP v6的无状态配置方式，来改善其缺点（见后面）。

（2）有状态自动配置(DHCP V6)：
    有状态地址自动配置的方式，与IPv4的DHCP(动态主机配置协议)一样，需要一个DHCP服务器，通过 客户机/服务器 模式从DHCP服务器处得到地址配置的信息。有状态自动配置和无状态自动配置可以一起使用。

DHCPv6典型组网中包括以下三种角色：
    DHCPv6客户端：动态获取IPv6地址、IPv6前缀或其他网络配置参数的设备。
    DHCPv6服务器：负责为DHCPv6客户端分配IPv6地址、IPv6前缀和其他网络配置参数的设备。需要注意的是：分配IPv6前缀后，DHCPv6客户端（一般是路由器）便能向所在网络发送包含该前缀信息的RA消息，以便网络内的主机根据该前缀自动配置IPv6地址。
    DHCPv6中继：DHCPv6客户端通过本地链路范围的组播地址与DHCPv6服务器通信，以获取IPv6地址和其他网络配置参数。如果服务器和客户端不在同一个链路范围内，则需要通过DHCPv6中继来转发报文，这样可以避免在每个链路范围内都部署DHCPv6服务器，既节省了成本，又便于进行集中管理。

（2.1）DHCPv6地址/前缀分配过程
    DHCPv6服务器为客户端分配地址/前缀的过程分为两类：交互四个消息的分配过程，和交互两个消息的快速分配过程。

    交互四个消息的分配过程：
    a.Solicit，DHCPv6客户端发送该消息，请求DHCPv6服务器为其分配IPv6地址/前缀和网络配置参数。
    b.Advertise，如果Solicit消息中无Rapid Commit选项，或有Rapid Commit选项，但服务器不支持快速分配过程，则DHCPv6服务器回复该消息，通知客户端可以为其分配的地址/前缀和网络配置参数。
    c.Request，如果DHCPv6客户端接收到多个服务器回复的Advertise消息，则根据消息接收的先后顺序、服务器优先级等，选择其中一台服务器，并向该服务器发送Request消息，请求服务器确认为其分配地址/前缀和网络配置参数。
    d.Reply，DHCPv6服务器回复该消息，确认将地址/前缀和网络配置参数分配给客户端使用。

    交互两个消息的快速分配过程:
    a.DHCPv6客户端在发送的Solicit消息中携带Rapid Commit选项，标识客户端希望服务器能够快速为其分配地址/前缀和网络配置参数；
    b.如果DHCPv6服务器支持快速分配过程，则直接返回Reply消息，为客户端分配IPv6地址/前缀和其他网络配置参数。如果DHCPv6服务器不支持快速分配过程，则采用交互四个消息的分配过程为客户端分配IPv6地址/前缀和其他网络配置参数。

（2.2）地址/前缀租约更新过程
    DHCPv6服务器分配给客户端的IPv6地址/前缀具有一定的租借期限。租借期限由有效生命期（Valid Lifetime）决定。地址/前缀的租借时间到达有效生命期后，DHCPv6客户端不能再使用该地址/前缀。在有效生命期到达之前，如果DHCPv6客户端希望继续使用该地址/前缀，则需要更新地址/前缀租约。
    具体如下：
    a.地址/前缀租借时间到达时间T1（推荐值为首选生命期Preferred Lifetime的一半）时，DHCPv6客户端会向为它分配地址/前缀的DHCPv6服务器单播发送Renew报文，以进行地址/前缀租约的更新。
    b.如果客户端可以继续使用该地址/前缀，则DHCPv6服务器回应续约成功的Reply报文，通知DHCPv6客户端已经成功更新地址/前缀租约；如果该地址/前缀不可以再分配给该客户端，则DHCPv6服务器回应续约失败的Reply报文，通知客户端不能获得新的租约。
    c.如果在T1时发送Renew请求更新租约，但是没有收到DHCPv6服务器的回应报文，则DHCPv6客户端会在T2（推荐值为首选生命期的0.8倍）时，向所有DHCPv6服务器组播发送Rebind报文请求更新租约。
    d.如果客户端可以继续使用该地址/前缀，则DHCPv6服务器回应续约成功的Reply报文，通知DHCPv6客户端已经成功更新地址/前缀租约；如果该地址/前缀不可以再分配给该客户端，则DHCPv6服务器回应续约失败的Reply报文，通知客户端不能获得新的租约。
    e.如果到达有效生命期后，DHCPv6客户端仍没有收到服务器的应答报文，客户端停止使用该地址/前缀。

（2.3）DHCPv6中继工作过程
    通过DHCPv6中继动态获取IPv6地址/前缀和其他网络配置参数的过程中，DHCPv6客户端与DHCPv6服务器的处理方式与不通过DHCPv6中继时的处理方式基本相同。
    具体如下：
    a.DHCPv6客户端向所有DHCPv6服务器和中继的组播地址FF02::1:2发送请求；
    b.DHCPv6中继接收到请求后，将其封装在Relay-forward报文的中继消息选项（Relay Message Option）中，并送给DHCPv6服务器；
    c.DHCPv6服务器从Relay-forward报文中解析出客户端的请求，为客户端选取IPv6地址和其他参数，构造应答消息，将应答消息封装在Relay-reply报文的中继消息选项中，并发送给DHCPv6中继；
    c.DHCPv6中继从Relay-reply报文中解析出服务器的应答，转发给DHCPv6客户端；
    e.DHCPv6客户端根据DHCPv6服务器分配的IPv6地址/前缀和其他参数进行网络配置。

    在有状态的dhcpv6地址自动配置中，最终的服务器能把ipv6地址和客户关系记录在案，方便了管理；并且，除了给主机提供一个完整的ipv6地址外，还可以对主机的DNS服务器的地址和域名等其它信息进行自动配置；另外DHCP v6还提供了前缀代理扩展功能，可以自动为下游路由器分配网络前缀，减少了手动部署网络的困难。

（2.4）DHCPv6无状态配置过程
    DHCP V6还提供了无状态DHCP V6服务，即只对DNS服务器的地址和域名等其它信息进行自动配置，而不分配IPV6地址，IP v6地址仍由路由通告方式获取。DHCPv6客户端通过地址无状态自动配置功能成功获取IPv6地址后，如果接收到的RA（Router Advertisement，路由器通告）报文中M标志位（被管理地址配置标志位）为0、O标志位（其他配置标志位）为1，则DHCPv6客户端会自动启动DHCPv6无状态配置功能，以获取除地址/前缀外的其他网络配置参数（M 标记设置为1时，此标记指示主机使用配置协议来获取有状态地址）。
    获取地址/前缀之外的其他网络参数过程具体如下：
    a.客户端以组播的方式向DHCPv6服务器发送Information-request报文，该报文中携带Option Request选项，指定客户端需要从服务器获取的配置参数。
    b.服务器收到Information-request报文后，为客户端分配网络配置参数，并单播发送Reply报文将网络配置参数返回给客户端。
    c.客户端检查Reply报文中提供的信息，如果与Information-request报文中请求的配置参数相符，则按照Reply报文中提供的参数进行网络配置；否则，忽略该参数。如果接收到多个Reply报文，客户端将选择最先收到的Reply报文，并根据该报文中提供的参数完成客户端无状态配.



五、手动配置ipv6地址
==========================
    默认启动ipv6之后，会采用无状态自动配置方式生成一个ipv6地址。若没有支持IPV6的路由和DHCP服务器，则网口只有一个本地链路地址（仅能与在本子网链路中的IPV6主机通信），此时我们可以手动配置主机的ipv6地址（如站点本地地址或全球单播地址等）。如果我们没有向ISP申请全球单播IP，那我们只能设置站点本地地址（即用于局域网的地址）。这里只给出ipv6配置的基本命令，具体配置过程需要根据实际情况而定：
1.查看ipv6地址
#ifconfig
或#ip -6 addr show dev eth0

2.查看ipv6路由
#route -A inet6
或#ip -6 route show dev eth0
或#ip -6 route list table main dev eth0
这里，dev部分可以忽略。


3.添加一个ipv6地址
#ifconfig eth0 inet6 add fe80::f2de:f1ff:fef0:861/64
或#ip -6 addr add fe80::f2de:f1ff:fef0:861/64 dev eth0
这会在已有的ipv6地址上，增加一个fe80::f2de:f1ff:fef0:860/64。

4.删除一个ipv6地址
#ifconfig eth0 inet6 del fe80::f2de:f1ff:fef0:860/64
或#ip -6 addr del fe80::f2de:f1ff:fef0:861/64 dev eth0

5.ipv6路由配置
（1）经由网关连至外面
语法：
# /sbin/route –A inet6 add <ipv6network>/<prefixlength> gw <ipv6address> [dev <device>]
或 # /sbin/ip -6 route <ipv6network>/<prefixlength> via <ipv6address> [dev <device>]

例子：添加2000::/3的路由（即一个表项），经过网关3ffe::ffff:0:f101::1
# /sbin/route –A inet6 add 2000::/3 gw 3ffe:ffff:0:f101::1
# /sbin/ip -6 route 2000::/3 via 3ffe:ffff:0:f101::1

（2）向指定接口发送
语法：
# /sbin/route –A inet6 add <network>/<prefixlength> dev <device>

例子：添加2000::/3的路由（即一个表项），发送至eth0
# /sbin/route –A inet6 add 2000::/3 dev eth0

（3）设定网关（未实践）
若要让linux成为网关，则：
# echo 1 > /proc/sys/net/ipv6/conf/all/forwarding
或使用radvd daemon（Router ADVertisement Daemon），支持路由的自动设定（无状态配置）：
/usr/local/sbin/radvd


六、IPV6向IPV4过渡采用的技术
=====================================
1.过渡时的问题：
（1）每个孤立的ipv6网络间如何（通过现有ipv4网络）达到互通目的。
（2）ipv6网络和现有ipv4网络如何能相互通信。
针对以上两类问题，有三种技术：双协议栈（RFC 2893 obsolete RFC1933）、隧道技术(RFC 2893，也称隔离技术)、NAT-PT(RFC 2766，协议转换技术)。隧道技术和双栈技术是第一个问题的解决方案，地址头翻译技术（或协议转换技术）是第二个问题的解决方案。


2.双栈技术
配置起来相对简单，在路由器上对同一个接口配置一个IPv4地址同时配置一个IPv6地址，在路由器上同时运行IPv4和IPv6两种路由协议，这样两种网络可以互通。这是其它过渡技术的基础。


3.隧道技术
隧道技术往往运用在IPv6网被运行的IPv4主干网隔离的情况，IPv6网象是处于IPv4海洋中的IPv6孤岛，隧道技术就是使IPv6孤岛相互通信。假设主机PC-A位于IPv6网络中，希望与另一IPv6网络中PC-B主机发送数据，路由器R1（与PC-A相连）和路由器R2（与PC-B相连）之间的网络是纯IPv4网络，隧道技术的工作原理实现过程简述如下： 
  首先，主机PC-A将IPv6数据包发送到路由器R1上。然后路由器R1接收到数据包后，把该数据包封装在一个IPv4首部中，发送到路由器R2。最后路由器R2收到数据包后，解开数据包的封装，剥离IPv4首部，取出IPv6数据包，转发至最终目的地主机PC-B。

3.协议转换
过程描述：
ipv4->ipv6
步骤如下:
a)IPv4主机向IPv4DNS服务器发出解析请求,如果不能本地解析,则转至NAT-PT;
b)该请求被NAT-PT服务器获取;
c)DNS-ALG将请求进行修改,然后发给IPv6侧的IPv6DNS服务器;
d)IPv6DNS服务器应答目的主机的IPv6地址;
e)NAT-PT服务器将该IPv6地址与自身维护的IPv4地址池中的一个IPv4地址建立映射关系,并在地址映射表中记录这一映射关系,地址映射部分将与原IPv6地址对应的IPv4地址返回DNS󰀁ALG;例如:211.66.59.10对应2001::1;
f)DNS-ALG将此IPv4地址应答给发出请求的IPv4主机;
g)IPv4主机以此IP地址(211.66.59.10)为目的地址进行通信;
h)NAT-PT服务器截获使用伪目的地址的IP分组,并在地址映射表中查找真正的目的地址,地址映射表返回目的主机的IPv6地址;协议转换部分对IP分组进行头标替换,将源地址修改为IPv4映射地址,目的地址改为目的主机的IPv6地址,并发送。
IPv6主机访问IPv4时,NAT-PT服务器工作过程基本不变,只是在步骤d略有不同。IPv4侧的DNS服务器应答了目的主机的IPv4地址,DNS-ALG接到IPv4address信息,向NAT-PT要prefix,把它加上变成IPv6地址(prefix:211.65.59.55);NAT-PT服务器应答发起会话的IPv6主机,但此时并不建立IPv4/IPv6地址映射,地址映射关系是在会话的首个包到达NAT-PT服务器时建立。


所需：
一个可以完成协议转换的第三方软件(如naptd)
需要内核和文件系统中支持iptables和ip6tables
需要一个ipv6的dns服务

在PC上对协议转换机制的实现过程：
服务器：Linux的Ubuntu 12.04发行版系统。支持ipv6+ipv4栈和ipv4双栈，安装naptd协议转换(ipv6<->ipv4转换)工具。单网卡，ipv4地址：192.168.28.170，ipv6地址：fc00::170/64。
客户端：ipv6的Windows系统，ipv6地址：为fc00::168/64。
大体流程：
a.客户端：向开发板发送ipv6数据包，
b.开发板：收到ipv6包后在其内部将数据包通过协议转换机制转换成ipv4数据包，转换后的ipv4数据包送到上层只支持ipv4的应用。
c.开发板：上层ipv4应用发出ipv4响应包，ipv4包被协议转换机制转换成ipv6数据包，转换后的ipv6响应包发送出去。
d.客户端：收到开发板转换后的ipv6响应包。


